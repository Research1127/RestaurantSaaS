# Presentation Layer Setup (ASP.NET Core)

This document explains how the Presentation layer is extracted and configured in the ASP.NET Core application using extension methods.

---

## Purpose of the Presentation Layer

The Presentation layer is responsible for:
- Handling HTTP requests and responses
- Registering controllers and API-related services
- Configuring Swagger (OpenAPI)
- Registering API middlewares
- Integrating request-level logging

Extracting this logic keeps `Program.cs` clean and improves maintainability, testability, and scalability.

---


In `Restaurants.Api` module, create `Extensions/WebApplicationBuilderExtensions.cs` class
- The class must be `static`
- The method must be named `AddPresentation`
- The return type should be `void`
- The method should extend `WebApplicationBuilder`

---

## Removing Presentation Logic from `Program.cs`

Remove the following Presentation-related code from `Program.cs`:

### File: program.cs
```csharp
builder.Services.AddControllers();

builder.Services.AddSwaggerGen(c =>
{
    c.AddSecurityDefinition("bearerAuth", new OpenApiSecurityScheme
    {
        Type = SecuritySchemeType.Http,
        Scheme = "bearer",
    });

    c.AddSecurityRequirement(new OpenApiSecurityRequirement
    {
        {
            new OpenApiSecurityScheme
            {
                Reference = new OpenApiReference
                {
                    Type = ReferenceType.SecurityScheme,
                    Id = "bearerAuth"
                }
            },
            Array.Empty<string>()
        }
    });
});

builder.Services.AddScoped<ErrorHandlingMiddleware>();
builder.Services.AddScoped<RequestTimeLoggingMiddleware>();
```

Then add to `WebApplicationBuilderExtensions.cs`

## Presentation Layer Extension

### File: `WebApplicationBuilderExtensions.cs`

```csharp
namespace Restaurants.Api.Extensions;

public static class WebApplicationBuilderExtensions
{
    public static void AddPresentation(this WebApplicationBuilder builder)
    {
        builder.Services.AddControllers();
        builder.Services.AddSwaggerGen(c =>
        {
            c.AddSecurityDefinition("bearerAuth", new OpenApiSecurityScheme
            {
                Type = SecuritySchemeType.Http,
                Scheme = "bearer",
            });
            c.AddSecurityRequirement(new OpenApiSecurityRequirement
            {
                {
                    new OpenApiSecurityScheme
                    {
                        Reference = new OpenApiReference { Type = ReferenceType.SecurityScheme, Id = "bearerAuth" }
                    },
                    []
                }
            });
        });

        builder.Services.AddScoped<ErrorHandlingMiddleware>();
        builder.Services.AddScoped<RequestTimeLoggingMiddleware>();
        builder.Host.UseSerilog((context, configuration) =>
            configuration
                .WriteTo.Console(theme: AnsiConsoleTheme.Code,
                    outputTemplate:"[{Timestamp:dd:MM:yyyy HH:mm:ss} {Level:u3}] {Message:lj}{NewLine}{Exception}")
                .ReadFrom.Configuration(context.Configuration));
    }
}

```

## Why Use `AddPresentation()`

Using an extension method for the Presentation layer allows:
- Clear separation of concerns
- Cleaner `Program.cs`
- Easier onboarding for new developers
- Consistent architecture across layers (Presentation, Application, Infrastructure)

---

